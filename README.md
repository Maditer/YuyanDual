# 语燕输入法双屏版
1. [语燕双屏版](https://github.com/Maditer/YuyanDual)以[语燕输入法](https://github.com/gurecn/YuyanIme)为基础，增加了对双屏安卓设备（目前只有 AYN Thor）的支持，并对一些功能做了个性化调整
2. 如果使用当中遇到问题，欢迎提交反馈，但我不保证能解决所有问题，因为我一行代码也不会写，全是 AI 写的 ^_^
3. 对项目感兴趣的大佬欢迎自取源码并进行优化
### 项目参考与鸣谢
1. [语燕输入法](https://github.com/gurecn/YuyanIme)
2. [Rime引擎](https://github.com/rime/librime)
3. [sherpa-ncnn](https://github.com/k2-fsa/sherpa-ncnn)
# 更新日志
## 2025-11-07
### 新增：
支持语音输入，按住空格说话即可输入
  - 基于[sherpa-ncnn](https://github.com/k2-fsa/sherpa-ncnn)语音识别引擎
  - 纯离线，不消耗流量；边说话边识别；支持中英双语
### 优化：
1. 优化：重写了键盘类型判断逻辑，更稳定。现在在两块屏幕间快速切换键盘，不容易出现键盘显示错位的问题
2. 优化：emoji 键盘底部的一行控制图标放大，更容易点击
3. 优化：菜单栏的图标大小优化，更容易点击，尤其是副屏竖屏状态下
### 修复：
1. 修复：在任务管理器“全部清除”导致默认输入法失效的问题
2. 修复：imeOptions 失效问题。现在在夸克里打完字，点右下角的按钮可以直接搜索，而不是换行了
3. 修复：副屏键盘出现时，原应用输入框不抬起的问题。现在输入法会正常给应用传递键盘高度，但实测部分应用无效，可能是因为副屏尺寸太小，应用不兼容
### 已知问题：
1. 部分应用在横屏状态下，需要点击两次输入框才出现键盘
2. 调节键盘高度时，拖拽不是很顺滑，有点闪烁
3. 长按删除键，出现“上滑清空”的按钮，在不同键盘高度下位置和大小有一点怪
4. 某些极端情况下还是有键盘错位的情况，需要收起再展开

## 2025-10-31
### 新增与优化：
1. 增加了对双屏设备的支持：当主屏处在横屏状态时，调用的输入法会在副屏出现，方便使用
2. 区分了“主屏横屏、主屏竖屏、副屏横屏、副屏竖屏”四种键盘显示状态，可以单独调整高度，互不影响
3. [设置-键盘-主题]页面适配了横屏
### 删减功能：
为了减少兼容性问题，提高可维护性，删除了部分（个人）不常用的功能
1. 悬浮键盘
2. 单手模式
3. 花漾字
4. 全面屏优化设置
### 已知问题：
1. ~~在任务管理器“全部清除”会导致默认输入法的状态被清空，需要重新选择。这个问题原版也存在，可以在任务管理器中下拉输入法窗口，锁定应用即可~~
2. ~~当一块屏幕已经呼出输入法时，在另一块屏幕重复呼出，有概率键盘状态不会刷新。只需先把之前的键盘收起再呼出即可~~
2. 在副屏上运行竖屏应用时，主屏横屏呼出键盘，会导致键盘以竖向显示，UI错位。需要先退出副屏的竖屏应用再使用
3. ~~emoji界面底部切tab的按钮偏小；副屏竖屏键盘的菜单栏按钮偏小。~~
